# æš—æ£‹ (Dark Chess / Banqi) - React Native Game

ç¶“å…¸æš—æ£‹éŠæˆ²,ä½¿ç”¨ React Native èˆ‡ Expo é–‹ç™¼ã€‚

## åŠŸèƒ½ç‰¹è‰²

- ğŸ® å®Œæ•´çš„æš—æ£‹éŠæˆ²è¦å‰‡å¯¦ä½œ
- ğŸ¨ å‚³çµ±ä¸­å¼ç¾å­¸è¨­è¨ˆ,æœ¨è³ªç´‹ç†ä»‹é¢
- ğŸ§ª éŠæˆ²æ ¸å¿ƒé‚è¼¯ 100% å–®å…ƒæ¸¬è©¦è¦†è“‹ç‡
- ğŸŒ æ‰€æœ‰ UI æ–‡å­—ä½¿ç”¨ç¹é«”ä¸­æ–‡
- âš¡ Clean Architecture:éŠæˆ²é‚è¼¯å®Œå…¨åˆ†é›¢æ–¼ UI å±¤

## éŠæˆ²è¦å‰‡

### åŸºæœ¬è¨­ç½®
- 4x8 æ£‹ç›¤ (32 æ ¼)
- 16 é¡†ç´…æ–¹æ£‹å­ + 16 é¡†é»‘æ–¹æ£‹å­
- åˆå§‹ç‹€æ…‹æ‰€æœ‰æ£‹å­é¢æœä¸‹éš¨æ©Ÿæ’åˆ—

### æ£‹å­ç¨®é¡èˆ‡æ•¸é‡
| æ£‹å­ | ç´…æ–¹ | é»‘æ–¹ | æ•¸é‡ | ç­‰ç´š |
|------|------|------|------|------|
| å°‡/å¸¥ | å¸¥ | å°‡ | 1 | 7 |
| å£«/ä»• | ä»• | å£« | 2 | 6 |
| è±¡/ç›¸ | ç›¸ | è±¡ | 2 | 5 |
| è»Š/ä¿¥ | ä¿¥ | è»Š | 2 | 4 |
| é¦¬/å‚Œ | å‚Œ | é¦¬ | 2 | 3 |
| åŒ…/ç‚® | ç‚® | åŒ… | 2 | 2 |
| å’/å…µ | å…µ | å’ | 5 | 1 |

### éŠæˆ²æµç¨‹
1. **é–‹å±€ç¿»ç‰Œ**:ä»»ä¸€ç©å®¶é»æ“Šä»»æ„æ£‹å­ç¿»é–‹,è©²æ£‹å­é¡è‰²æ±ºå®šç©å®¶é™£ç‡Ÿ
2. **è¼ªæµè¡Œå‹•**:é›™æ–¹è¼ªæµé€²è¡Œä»¥ä¸‹ä¸‰ç¨®æ“ä½œä¹‹ä¸€
   - **ç¿»ç‰Œ (Flip)**:ç¿»é–‹ä¸€é¡†é¢æœä¸‹çš„æ£‹å­
   - **ç§»å‹• (Move)**:å°‡è‡ªå·±çš„æ£‹å­ç§»å‹•åˆ°ç›¸é„°ç©ºæ ¼ (ä¸Šä¸‹å·¦å³)
   - **åƒå­ (Capture)**:åƒæ‰ç›¸é„°çš„æ•µæ–¹æ£‹å­

### åƒå­è¦å‰‡ (é—œéµ!)
1. **æ¨™æº–ç­‰ç´šè¦å‰‡**:ç­‰ç´š >= å°æ–¹æ‰èƒ½åƒå­ (ä¾‹:è»Šå¯åƒé¦¬ã€ç‚®ã€å…µ)
2. **å°‡å¸¥ vs å…µå’ç‰¹æ®Šè¦å‰‡**:
   - å°‡/å¸¥ **ä¸èƒ½** åƒ å’/å…µ
   - å’/å…µ **å¯ä»¥** åƒ å°‡/å¸¥
3. **ç‚®çš„è·³åƒè¦å‰‡**:
   - ç‚® **ä¸èƒ½** ç›´æ¥åƒç›¸é„°çš„æ£‹å­
   - ç‚® **åªèƒ½** éš”è‘— **æ°å¥½ä¸€é¡†** æ£‹å­è·³åƒ (ä¸é™é¡è‰²)
   - éš”è‘— 0 é¡†æˆ– 2+ é¡†éƒ½ä¸èƒ½åƒ

### å‹åˆ©æ¢ä»¶
- **åƒå…‰å…¨éƒ¨æ•µæ–¹æ£‹å­** (16 é¡†)
- **å°æ–¹ç„¡å­å¯å‹•** (åƒµå±€,Stalemate)

## æŠ€è¡“æ¶æ§‹

### æ ¸å¿ƒæŠ€è¡“æ£§
- **æ¡†æ¶**: React Native (Expo Managed Workflow)
- **èªè¨€**: TypeScript (strict mode)
- **ç‹€æ…‹ç®¡ç†**: Zustand
- **æ¸¬è©¦**: Jest + React Native Testing Library
- **Linting**: ESLint + Prettier

### å°ˆæ¡ˆçµæ§‹
```
src/
â”œâ”€â”€ core/                 # ç´” TypeScript éŠæˆ²é‚è¼¯ (ç„¡ React ä¾è³´)
â”‚   â”œâ”€â”€ types.ts          # è³‡æ–™å‹åˆ¥å®šç¾©
â”‚   â”œâ”€â”€ rules.ts          # éŠæˆ²è¦å‰‡èˆ‡ç­‰ç´šç³»çµ±
â”‚   â”œâ”€â”€ boardUtils.ts     # æ£‹ç›¤åº§æ¨™å·¥å…·
â”‚   â”œâ”€â”€ BoardGenerator.ts # åˆå§‹åŒ–èˆ‡æ´—ç‰Œ
â”‚   â””â”€â”€ GameEngine.ts     # å‹•ä½œé©—è­‰èˆ‡åŸ·è¡Œ
â”œâ”€â”€ components/           # React Native UI å…ƒä»¶
â”‚   â”œâ”€â”€ BoardView.tsx     # 4x8 æ£‹ç›¤ä¸»å…ƒä»¶
â”‚   â”œâ”€â”€ GridCell.tsx      # å–®ä¸€æ ¼å­ (å¯é»æ“Š)
â”‚   â”œâ”€â”€ PieceComponent.tsx # æ£‹å­é¡¯ç¤º (ä¸­æ–‡å­—ç¬¦)
â”‚   â””â”€â”€ GameInfo.tsx      # éŠæˆ²ç‹€æ…‹é¡¯ç¤º
â””â”€â”€ store/                # Zustand ç‹€æ…‹ç®¡ç†
    â””â”€â”€ gameStore.ts      # éŠæˆ²ç‹€æ…‹èˆ‡å‹•ä½œ

tests/
â”œâ”€â”€ unit/core/            # æ ¸å¿ƒé‚è¼¯å–®å…ƒæ¸¬è©¦ (100% è¦†è“‹ç‡)
â””â”€â”€ integration/components/ # UI æ•´åˆæ¸¬è©¦
```

## é–‹ç™¼æŒ‡å—

### ç’°å¢ƒéœ€æ±‚
- Node.js 16+
- npm æˆ– yarn
- Expo CLI

### å®‰è£èˆ‡åŸ·è¡Œ
```bash
# å®‰è£ä¾è³´
npm install

# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
npm start

# åœ¨æ¨¡æ“¬å™¨æˆ–å¯¦æ©Ÿä¸ŠåŸ·è¡Œ
npm run android  # Android
npm run ios      # iOS (éœ€ macOS)
npm run web      # Web ç€è¦½å™¨
```

### æ¸¬è©¦
```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
npm test

# ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š
npm test -- --coverage

# Watch æ¨¡å¼
npm test -- --watch
```

### Linting
```bash
# åŸ·è¡Œ ESLint
npm run lint

# è‡ªå‹•ä¿®å¾©
npm run lint:fix
```

## Clean Architecture åŸå‰‡

### åˆ†å±¤æ¶æ§‹
```
UI Layer (React Components)
     â†“ å‘¼å«
Store Layer (Zustand)
     â†“ å‘¼å«
Core Logic Layer (Pure TypeScript)
```

### æ ¸å¿ƒåŸå‰‡
1. **éŠæˆ²é‚è¼¯ (src/core/) å®Œå…¨ç¨ç«‹**
   - ä¸ä¾è³´ React
   - ä¸ä¾è³´ UI æ¡†æ¶
   - ç´”å‡½æ•¸å¼,ç„¡å‰¯ä½œç”¨
   - å®Œå…¨å¯æ¸¬è©¦ (100% è¦†è“‹ç‡)

2. **UI å…ƒä»¶åªè² è²¬é¡¯ç¤ºèˆ‡äº’å‹•**
   - ä¸åŒ…å«éŠæˆ²é‚è¼¯
   - é€é Zustand store èˆ‡ core æºé€š
   - å°ˆæ³¨æ–¼ UX/UI

3. **ç‹€æ…‹ç®¡ç†ä½œç‚ºä¸­ä»‹å±¤**
   - Zustand store å”èª¿ UI èˆ‡ Core
   - è™•ç†éåŒæ­¥æ“ä½œ
   - éŒ¯èª¤è™•ç†èˆ‡è¨Šæ¯ç¿»è­¯

## è¨­è¨ˆæ±ºç­–

### ç‚ºä½•é¸æ“‡ Clean Architecture?
- **å¯æ¸¬è©¦æ€§**:ç´”é‚è¼¯å‡½æ•¸æ˜“æ–¼å–®å…ƒæ¸¬è©¦
- **å¯ç¶­è­·æ€§**:è¦å‰‡è®Šæ›´ä¸å½±éŸ¿ UI
- **å¯ç§»æ¤æ€§**:æ ¸å¿ƒé‚è¼¯å¯ç§»æ¤åˆ°å…¶ä»–å¹³å° (Web, Desktop)

### ç‚ºä½•é¸æ“‡ Zustand?
- è¼•é‡ç´š,ç„¡æ¨£æ¿ä»£ç¢¼
- TypeScript æ”¯æ´å„ªç§€
- éä¾µå…¥å¼,æ˜“æ–¼æ•´åˆ

### UI è¨­è¨ˆç†å¿µ
- **å‚³çµ±ä¸­å¼ç¾å­¸**:æœ¨è³ªç´‹ç†ã€ç°¡ç´„ç·šæ¢
- **ç¹é«”ä¸­æ–‡ UI**:æ‰€æœ‰ä½¿ç”¨è€…ä»‹é¢æ–‡å­—
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**:é©é…ä¸åŒè¢å¹•å°ºå¯¸

## æˆæ¬Š

MIT License

## é–‹ç™¼è€…

Built with â¤ï¸ using React Native + Expo
